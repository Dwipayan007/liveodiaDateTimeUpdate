var LiveOdiaApp=angular.module("LiveOdia",["ngRoute","LocalStorageModule","ui.bootstrap","ngAnimate","ngMaterial"]),check=!1,_isNotMobile=function(){return function(a){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(check=!0)}(navigator.userAgent||navigator.vendor||window.opera),!check}();LiveOdiaApp.constant("mobileCheck",check),LiveOdiaApp.constant("baseService","http://www.liveodia.co/"),LiveOdiaApp.config(["$routeProvider","$httpProvider","$locationProvider",function($routeProvider,$httpProvider,$locationProvider){$httpProvider.defaults.headers.common={},$httpProvider.defaults.headers.post={},$httpProvider.defaults.headers.put={},$httpProvider.defaults.headers.patch={},$locationProvider.html5Mode(!0),$routeProvider.when("/login",{templateUrl:"App/Views/login.html",controller:"loginController"}),$routeProvider.when("/home",{templateUrl:_isNotMobile?"App/Views/home.html":"App/MobileViews/home.html",controller:"homeController",css:"css/mobileview.css"}),$routeProvider.when("/about",{controller:"aboutController",templateUrl:"App/Views/about.html"}),$routeProvider.when("/contact",{controller:"contactController",templateUrl:"contact.html"}),$routeProvider.when("/detailnews/:id",{controller:"detailnewsController",templateUrl:_isNotMobile?"App/Views/detailnews.html":"App/MobileViews/detailnews.html",css:"css/mobileview.css"}),$routeProvider.when("/detailhotnews/:id",{controller:"detailHotnewsController",templateUrl:_isNotMobile?"App/Views/hotdetailnews.html":"App/MobileViews/hotdetailnews.html",css:"css/mobileview.css"}),$routeProvider.when("/admin",{controller:"adminController",templateUrl:"App/Views/admin.html"}),$routeProvider.when("/hotnewsdetail/:id",{controller:"detailHotnewsController",templateUrl:_isNotMobile?"App/Views/hotdetailnews.html":"App/MobileViews/hotdetailnews.html",css:"css/mobileview.css"}),$routeProvider.when("/hotnews",{controller:"hotnewsController",templateUrl:_isNotMobile?"App/Views/hotnews.html":"App/MobileViews/hotnews.html",css:"css/mobileview.css"}),$routeProvider.otherwise({redirectTo:"/home"})}]),LiveOdiaApp.run(function($rootScope,$location,loginServiceFactory){loginServiceFactory.fillAuthData(),$rootScope.$on("$routeChangeStart",function(event,next,current){var path=$location.path();loginServiceFactory.authentication.isAuth||"/login"!=path||$location.path("/login"),"/"!=path&&"/login"==next.$$route.originalPath&&$location.path("/login"),"/home"!=$location.path()?$rootScope.hideit=!0:$rootScope.hideit=!1})}),LiveOdiaApp.directive("imageDirective",["$document","$rootScope",function($document,$rootScope){return{link:function(scope,element,attr){function mousemove(event){y=event.pageY-startY,x=event.pageX-startX,console.log(event.pageY,event.pageX),console.log(x,y),element.css({top:y+"px",left:x+"px"})}function mouseup(){$document.off("mousemove",mousemove),$document.off("mouseup",mouseup)}var startX=0,startY=0,x=0,y=0;element.css({position:"absolute",border:"1px solid red",backgroundColor:"lightgrey",cursor:"pointer"}),element.on("mousedown",function(event){event.preventDefault(),startX=event.pageX-x,startY=event.pageY-y,console.log(startX+"-"+startY);var startXY=[startX,startY];$rootScope.startXY=startXY,console.log($rootScope.startXY),$document.on("mousemove",mousemove),$document.on("mouseup",mouseup)})}}}]),LiveOdiaApp.directive("imageShowDirective",function(){return{restrict:"E",transclude:"true",templateUrl:function(elem,attr){var imgPosition=attr.imageposition;return"top-left"===imgPosition?"App/Directives/image-top-left.html":"top-right"===imgPosition?"App/Directives/image-top-right.html":"App/Directives/error.html"}}}),LiveOdiaApp.directive("imageUpload",["$parse",function($parse){return{restrict:"A",link:function(scope,element,attrs){var model=$parse(attrs.imageUpload),modelSetter=model.assign;element.bind("change",function(){scope.$apply(function(){modelSetter(scope,element[0].files[0])})})}}}]),LiveOdiaApp.directive("myTickerDirective",function($interval,$timeout){return{restrict:"A",scope:!0,compile:function(){return function(scope,element,attributes){var timing,timingEffect,timingEffectDivideBy=4,isHovered=!1,innerTime=!1,start=!1;attributes.timing?(timing=attributes.timing,timingEffect=timing/timingEffectDivideBy):(timing=5e3,timingEffect=timing/timingEffectDivideBy/timingEffectDivideBy*2),scope.$watch(element,function(){var itemFirst,list=element,items=element.find("li");items.length?(list.addClass("active"),start=$interval(function(){return isHovered?void $timeout.cancel(innerTime):(items=list.children("li"),itemFirst=angular.element(items[0]),itemFirst.addClass("fade-out minus-margin-top"),void $timeout(function(){itemFirst.removeClass("minus-margin-top"),list.append(itemFirst),innerTime=$timeout(function(){items.removeClass("fade-out")},timingEffect)},timingEffect))},timing)):console.warn("no items assigned to ticker! Ensure you have correctly assigned items to your ng-repeat.")}),element.on("$destroy",function(){$interval.cancel(start,0)}),element.on("mouseenter",function(){isHovered=!0}),element.on("mouseleave",function(){isHovered=!1})}}}}),LiveOdiaApp.controller("aboutController",["$scope",function($scope){}]),LiveOdiaApp.controller("adminController",["$scope","$rootScope","$filter","$location","adminServiceFactory",function($scope,$rootScope,$filter,$location,adminServiceFactory){$scope.hotnews={},$scope.Newstory={},$scope.Topnews={},$scope.hnewsTitle={},$scope.impnews={},$scope.selectedOption,$scope.ntitle="",$scope.mesgHnews="",$scope.mesgTnews="",$scope.mesgNnews="",$scope.mesgInews="",$scope.myDate=new Date,$scope.loader={loading1:!1,loading2:!1,loading3:!1,loading4:!1},$scope.minDate=new Date($scope.myDate.getFullYear(),$scope.myDate.getMonth()-2,$scope.myDate.getDate()),$scope.maxDate=new Date($scope.myDate.getFullYear(),$scope.myDate.getMonth()+2,$scope.myDate.getDate()),$scope.onlyWeekendsPredicate=function(date){var day=date.getDay();return 0===day||6===day},$scope.updateDate=function(){$scope.SelectedDate=$filter("date")(new Date($scope.myDate),"dd-MM-yyyy"),adminServiceFactory.updateNewsDate($scope.SelectedDate).then(function(res){res&&$location.path("/home")})},$scope.DeleteAllNews=function(){adminServiceFactory.DeleteAllNews().then(function(res){res&&($scope.mesg="You have deleted all News Please add some fresh news...")})},$scope.changeOption=function(){$scope.ntitle=$scope.selectedOption.ndid},$scope.AddNewCategory=function(cname){adminServiceFactory.AddCategory(cname).then(function(data){})},$scope.DownloadNews=function(){$scope.SelectedDate=$filter("date")(new Date($scope.myDate),"dd-MM-yyyy"),adminServiceFactory.DownloadNews($scope.SelectedDate).then(function(pdfname){var blob=new Blob([pdfname],{type:"application/pdf"}),fileURL=URL.createObjectURL(blob),a=document.createElement("a");a.href=fileURL,a.target="_blank",a.download="mynews.pdf",document.body.appendChild(a),a.click()})},$scope.submitImpNews=function(){$scope.loader.loading4=!0;var file={};file=$scope.impnews,file.ImpNews="Inews",void 0!==$scope.myFile4&&(file.file=$scope.myFile4),adminServiceFactory.uploadFileToUrl(file).then(function(data){""===data?($scope.loader.loading4=!1,$scope.mesgInews="Uploaded Successfully"):($scope.loader.loading4=!1,$scope.mesgInews="Not Successful"),file=null,$scope.impnews={},$scope.resetForm("submitImpNews")})},$scope.submitHotNews=function(){$scope.loader.loading1=!0;var file={};file=$scope.hotnews,file.HotNews="hnews",file.selOption=$scope.selectedOption.ndid,void 0!==$scope.myFile1&&(file.file=$scope.myFile1),adminServiceFactory.uploadFileToUrl(file).then(function(data){""===data?($scope.loader.loading1=!1,$scope.mesgHnews="Uploaded Successfully"):($scope.loader.loading1=!1,$scope.mesgHnews="Not Successful"),file=null,$scope.hotnews={},$scope.resetForm("submitHotNews")})},$scope.submitNewstory=function(){$scope.loader.loading2=!0;var file={};file=$scope.Newstory,file.Newstory="nstory",void 0!==$scope.myFile2&&(file.file=$scope.myFile2),adminServiceFactory.uploadFileToUrl(file).then(function(data){""===data?($scope.loader.loading2=!1,$scope.mesgNnews="Uploaded Successfully"):($scope.loader.loading2=!1,$scope.mesgNnews="Not Successful"),file=null,$scope.Newstory={},$scope.resetForm("submitNewstory")})},$scope.getAllHotNewsTitle=function(){adminServiceFactory.getHotFullNewsTitle().then(function(hnewsdata){hnewsdata&&($scope.hnewsTitle=hnewsdata,$scope.selectedOption=$scope.hnewsTitle[0])})},$scope.submitTopNews=function(){$scope.loader.loading3=!0;var file={};file=$scope.Topnews,file.TopNews="tnews",void 0!==$scope.myFile3&&(file.file=$scope.myFile3),adminServiceFactory.uploadFileToUrl(file).then(function(data){""===data?($scope.loader.loading3=!1,$scope.mesgTnews="Uploaded Successfully"):($scope.loader.loading3=!1,$scope.mesgTnews="Not Successful"),file=null,$scope.Topnews={},$scope.resetForm("submitTopNews")})},$scope.getAllHotNewsTitle(),$scope.resetForm=function(filereset){"submitNewstory"===filereset?(angular.element(document.querySelector("#file2")).val(null),$scope.myFile2=void 0):"submitTopNews"===filereset?(angular.element(document.querySelector("#file3")).val(null),$scope.myFile3=void 0):"submitHotNews"===filereset?(angular.element(document.querySelector("#file1")).val(null),$scope.myFile1=void 0):"submitImpNews"===filereset&&(angular.element(document.querySelector("#file4")).val(null),$scope.myFile4=void 0)}}]),LiveOdiaApp.controller("detailHotnewsController",["$scope","$rootScope","$location","$routeParams","$anchorScroll","HotnewsServiceFactory","sharedService","homeServiceFactory",function($scope,$rootScope,$location,$routeParams,$anchorScroll,HotnewsServiceFactory,sharedService,homeServiceFactory){$scope.newsid=$routeParams.id,$scope.viewActive=$rootScope.hideit,$scope.hnewsDetail=[],$scope.hnewsTitle=[],$scope.hotnews=[],$scope.topstories=[],$scope.hnews=!1,$scope.hnewssummary=!1,$scope.tpnews=!1,$scope.index="",$scope.hnewsData=[],$scope.hnewsid="",$scope.nHNews="",$scope.pHNews="",$scope.getPreviousHotNews=function(newsid){$scope.hnewsid=newsid,$scope.getHotNewsOnClick($scope.hnewsid)},$scope.getNextHotNews=function(newsid){$scope.hnewsid=newsid,$scope.getHotNewsOnClick($scope.hnewsid)},$scope.getAllTopNews=function(){HotnewsServiceFactory.getAllTopNews().then(function(newsData){newsData&&($scope.topstories=[],$scope.topstories=newsData)})},$scope.getTopNewsByID=function(newsid){homeServiceFactory.getTopNewsByID(newsid).then(function(result){result&&($scope.tpnews=!0,$scope.hnews=!1,$scope.hnewssummary=[],$scope.hnewssummary=!1,$scope.tnews=result)})},$scope.getHotNewsTitle=function(){HotnewsServiceFactory.getHotFullNewsTitle().then(function(hnewsdata){hnewsdata&&($scope.hnewsTitle=[],$scope.hnewsTitle=hnewsdata)})},$scope.getHotNewsByID=function(){$scope.hnewsid=$scope.newsid,HotnewsServiceFactory.getHotNewsSummary($scope.newsid).then(function(hnewsdata){hnewsdata&&($scope.hnewsDetail=[],$scope.hnewssummary=!0,$scope.hnews=!1,$scope.tpnews=!1,$scope.hnewsDetail=hnewsdata[0],$scope.getHotNewsTitle(),$scope.getAllTopNews(),$scope.getHotNewsData())})},$scope.getHotNewsOnClick=function(hnid){$scope.hnewsid=hnid,HotnewsServiceFactory.getHotNewsByID(hnid).then(function(result){result&&($scope.hnews=!1,$scope.tpnews=!1,$scope.hnewssummary=[],$scope.hnewssummary=!0,$scope.hnewsDetail=result[0],$scope.getHotNewsData())})},$scope.getHotNewsData=function(){homeServiceFactory.getAllHotNews().then(function(hnewsData){hnewsData&&($scope.hnewsData=hnewsData,""!==$scope.hnewsid&&($scope.index=_.findIndex($scope.hnewsData,{hnid:parseInt($scope.hnewsid)}),$scope.pHNews=$scope.hnewsData[$scope.index-1],$scope.nHNews=$scope.hnewsData[$scope.index+1]))})},$scope.getHotNewsSummary=function(ndid){homeServiceFactory.getHotNewsSummary(ndid).then(function(hnewsdata){hnewsdata&&($scope.hnewssummary=!1,$scope.hnews=!0,$scope.tpnews=!1,$scope.hotnews=hnewsdata)})},$scope.mobile&&($anchorScroll.yOffset=20,$anchorScroll()),$(document).ready(function(){function hamburger_cross(){isClosed===!0?(overlay.hide(),trigger.removeClass("is-open"),trigger.addClass("is-closed"),isClosed=!1):(overlay.show(),trigger.removeClass("is-closed"),trigger.addClass("is-open"),isClosed=!0)}var trigger=$(".hamburger"),overlay=$(".overlay"),isClosed=!1;trigger.click(function(){hamburger_cross()}),$('[data-toggle="offcanvas"]').click(function(){$("#wrapper").toggleClass("toggled")})}),$scope.getHotNewsByID()}]),LiveOdiaApp.controller("detailTopNewsController",["$scope","$routeParams","detailTopnewsService",function($scope,$routeParams,detailTopnewsService){$scope.message="Welcome to detail view page",$scope.detailNews=[],$scope.newsid=$routeParams.id,$scope.NextNews=function(newsid){},$scope.GetTopDetailNews=function(){detailTopnewsService.getTopDetailNews($scope.newsid).then(function(dnewsdata){dnewsdata&&($scope.detailNews=dnewsdata)})},$scope.GetTopDetailNews()}]),LiveOdiaApp.controller("detailnewsController",["$scope","$routeParams","$location","$anchorScroll","detailnewsServiceFactory","HotnewsServiceFactory","homeServiceFactory",function($scope,$routeParams,$location,$anchorScroll,detailnewsServiceFactory,HotnewsServiceFactory,homeServiceFactory){function hamburger_cross(){isClosed===!0?(overlay.hide(),trigger.removeClass("is-open"),trigger.addClass("is-closed"),isClosed=!1):(overlay.show(),trigger.removeClass("is-closed"),trigger.addClass("is-open"),isClosed=!0)}$scope.message="Welcome to detail view page",$scope.detailNews=[],$scope.newsid=$routeParams.id,$scope.hnews=!1,$scope.hnewssummary=!1,$scope.nstory=!1,$scope.tpnews=!1,$scope.pnewsclck=!1,$scope.newstory=[],$scope.pNews="",$scope.nNews="",$scope.index="",$scope.hnewsData=[],$scope.hnewsid="",$scope.nHNews="",$scope.pHNews="",$scope.impnews=[],$scope.imnews=[],$scope.getPreviousNews=function(newsid){$scope.newsid=newsid,$scope.GetDetailNews()},$scope.getNextNews=function(newsid){$scope.newsid=newsid,$scope.GetDetailNews()},$scope.getPreviousHotNews=function(newsid){$scope.hnewsid=newsid,$scope.pnewsclck=!0,$scope.getHotNewsOnClick($scope.hnewsid)},$scope.getNextHotNews=function(newsid){$scope.hnewsid=newsid,$scope.getHotNewsOnClick($scope.hnewsid)},$scope.getAllTopNews=function(){HotnewsServiceFactory.getAllTopNews().then(function(newsData){newsData&&($scope.topstories=[],$scope.topstories=newsData)})},$scope.getHotNewsTitle=function(){HotnewsServiceFactory.getHotFullNewsTitle().then(function(hnewsdata){hnewsdata&&($scope.hnewsTitle=[],$scope.hnewsTitle=hnewsdata)})},$scope.getTopNewsByID=function(newsid){homeServiceFactory.getTopNewsByID(newsid).then(function(result){result&&($scope.tpnews=!0,$scope.hnews=!1,$scope.nstory=!1,$scope.hnewssummary=[],$scope.hnewssummary=!1,$scope.tnews=result)})},$scope.getHotNewsSummary=function(ndid){homeServiceFactory.getHotNewsSummary(ndid).then(function(hnewsdata){hnewsdata&&($scope.hnewssummary=!1,$scope.hnews=!0,$scope.nstory=!1,$scope.tpnews=!1,$scope.hotnews=hnewsdata)})},$scope.getHotNewsOnClick=function(hnid){$scope.hnewsid=hnid,HotnewsServiceFactory.getHotNewsByID(hnid).then(function(result){result&&($scope.hnews=!1,$scope.tpnews=!1,$scope.nstory=!1,$scope.hnewssummary=[],$scope.hnewssummary=!0,$scope.hnewsDetail=result[0],$scope.getHotNewsData())})},$scope.getHotNewsData=function(){homeServiceFactory.getAllHotNews().then(function(hnewsData){hnewsData&&($scope.hnewsData=hnewsData,""!==$scope.hnewsid&&($scope.index=_.findIndex($scope.hnewsData,{hnid:parseInt($scope.hnewsid)}),$scope.pHNews=$scope.hnewsData[$scope.index-1],$scope.nHNews=$scope.hnewsData[$scope.index+1]))})},$scope.GetDetailNews=function(){detailnewsServiceFactory.getDetailNews($scope.newsid).then(function(dnewsdata){dnewsdata&&($scope.nstory=!0,$scope.hnewssummary=!1,$scope.hnews=!1,$scope.tpnews=!1,$scope.detailNews=dnewsdata,$scope.getHotNewsTitle(),$scope.getAllTopNews())}),homeServiceFactory.getAllNewsStory().then(function(newsData){newsData&&($scope.newstory=newsData,$scope.index=_.findIndex($scope.newstory,{nsid:parseInt($scope.newsid)}),$scope.pNews=$scope.newstory[$scope.index-1],$scope.nNews=$scope.newstory[$scope.index+1])})};var trigger=$(".hamburger"),overlay=$(".overlay"),isClosed=!1;trigger.click(function(){hamburger_cross()}),$('[data-toggle="offcanvas"]').click(function(){$("#wrapper").toggleClass("toggled")}),$scope.mobile&&($anchorScroll.yOffset=20,$anchorScroll()),$scope.GetDetailNews()}]),LiveOdiaApp.controller("homeController",["$scope","$rootScope","$location","$anchorScroll","$route","$routeParams","homeServiceFactory","HotnewsServiceFactory","mobileCheck",function($scope,$rootScope,$location,$anchorScroll,$route,$routeParams,homeServiceFactory,HotnewsServiceFactory,mobileCheck){function hamburger_cross(){$scope.isClosed===!0?(overlay.hide(),trigger.removeClass("is-open"),trigger.addClass("is-closed"),$scope.isClosed=!1):(overlay.show(),trigger.removeClass("is-closed"),trigger.addClass("is-open"),$scope.isClosed=!0)}$scope.mobile=mobileCheck,$scope.hotNews=[],$scope.topstories=[],$scope.newsories=[],$scope.filteredNews=[],$scope.currentPage=1,$scope.numPerPage=10,$scope.maxSize=5,$scope.fullnews=[],$scope.cleanData=[],$scope.topnews=[],$scope.hotnews=[],$scope.newstory=[],$scope.letterLimit=120,$scope.impnewsLimit=10,$scope.tpnews=!1,$scope.hnews=!1,$scope.nstory=!1,$scope.ipnews=!1,$scope.isClosed=!1,$scope.impnews=[],$scope.imnews=[],$scope.GetImpNewsById=function(inid){homeServiceFactory.GetImpNewsById(inid).then(function(newsData){newsData&&($scope.imnews=newsData,$scope.ipnews=!0,$scope.tpnews=!1,$scope.hnews=!1,$scope.nstory=!1)})},$scope.mobile&&($anchorScroll.yOffset=20,$anchorScroll()),$scope.getImpNews=function(){homeServiceFactory.getImpNews().then(function(newsData){newsData&&($scope.impnews=newsData)})},$scope.DeleteNewsStory=function(nsid){homeServiceFactory.DeleteNewsStory(nsid).then(function(res){res&&($scope.getAllNews(),$scope.ipnews=!1,$scope.tpnews=!1,$scope.hnews=!1,$scope.nstory=!0)})},$scope.DeleteTopNews=function(tnid){homeServiceFactory.DeleteTopNews(tnid).then(function(res){res&&($scope.getAllNews(),$scope.tpnews=!0,$scope.ipnews=!1,$scope.hnews=!1,$scope.nstory=!1)})},$scope.DeleteHotNews=function(hnid){homeServiceFactory.DeleteHotNews(hnid).then(function(res){res&&($scope.getAllNews(),$scope.tpnews=!1,$scope.ipnews=!1,$scope.hnews=!1,$scope.nstory=!0)})},$scope.getAllNews=function(){homeServiceFactory.getAllNews().then(function(newsData){newsData&&($scope.topstories=newsData,$scope.getHotNewsTitle())}),homeServiceFactory.getAllNewsStory().then(function(newsData){newsData&&($scope.nstory=!0,$scope.ipnews=!1,$scope.newstory=newsData)})},$scope.getTopNewsByID=function(newsid){homeServiceFactory.getTopNewsByID(newsid).then(function(result){result&&($scope.tpnews=!0,$scope.ipnews=!1,$scope.hnews=!1,$scope.nstory=!1,$scope.tnews=result)})},$scope.getHotNewsTitle=function(){HotnewsServiceFactory.getHotFullNewsTitle().then(function(hnewsdata){hnewsdata&&($scope.hotNews=hnewsdata)})};var trigger=$(".hamburger"),overlay=$(".overlay");trigger.click(function(){hamburger_cross()}),$('[data-toggle="offcanvas"]').click(function(){$("#wrapper").toggleClass("toggled")}),$scope.getHotNewsSummary=function(ndid){homeServiceFactory.getHotNewsSummary(ndid).then(function(hnewsdata){hnewsdata&&($scope.tpnews=!1,$scope.ipnews=!1,$scope.nstory=!1,$scope.hnews=!0,$scope.hnewsDetail=hnewsdata)})},$scope.getImpNews(),$scope.getAllNews()}]),LiveOdiaApp.controller("hotnewsController",["$scope","$rootScope","$location","$routeParams","$anchorScroll","HotnewsServiceFactory","sharedService","mobileCheck",function($scope,$rootScope,$location,$routeParams,$anchorScroll,HotnewsServiceFactory,sharedService,mobileCheck){$scope.mobile=mobileCheck,$scope.mobile&&($location.hash("page-content-wrapper"),$anchorScroll.yOffset=20,$anchorScroll()),$(document).ready(function(){function hamburger_cross(){isClosed===!0?(overlay.hide(),trigger.removeClass("is-open"),trigger.addClass("is-closed"),isClosed=!1):(overlay.show(),trigger.removeClass("is-closed"),trigger.addClass("is-open"),isClosed=!0)}var trigger=$(".hamburger"),overlay=$(".overlay"),isClosed=!1;trigger.click(function(){hamburger_cross()}),$('[data-toggle="offcanvas"]').click(function(){$("#wrapper").toggleClass("toggled")})})}]),LiveOdiaApp.controller("indexController",["$scope","$rootScope","$location","$anchorScroll","homeServiceFactory","HotnewsServiceFactory","loginServiceFactory","mobileCheck",function($scope,$rootScope,$location,$anchorScroll,homeServiceFactory,HotnewsServiceFactory,loginServiceFactory,mobileCheck){$scope.mobile=mobileCheck,$scope.viewActive=$rootScope.hideit,$scope.logOut=function(){loginServiceFactory.logOut(),$location.path("/home")},$scope.onHomeClick=function(){$location.path("/about")},$scope.authentication=loginServiceFactory.authentication}]),LiveOdiaApp.controller("loginController",["$scope","$rootScope","$location","$routeParams","loginServiceFactory","sharedService",function($scope,$rootScope,$location,$routeParams,loginServiceFactory,sharedService){$scope.autho=!1,$scope.loginData={userName:"",password:"",userRole:"1"},$scope.login=function(){loginServiceFactory.login($scope.loginData).then(function(ldata){ldata===!1?$scope.message="Please Validate the Username and Password":$location.path("/admin")})},$(window,document,void 0).ready(function(){$("input").blur(function(){var $this=$(this);$this.val()?$this.addClass("used"):$this.removeClass("used")});var $ripples=$(".ripples");$ripples.on("click.Ripples",function(e){var $this=$(this),$offset=$this.parent().offset(),$circle=$this.find(".ripplesCircle"),x=e.pageX-$offset.left,y=e.pageY-$offset.top;$circle.css({top:y+"px",left:x+"px"}),$this.addClass("is-active")}),$ripples.on("animationend webkitAnimationEnd mozAnimationEnd oanimationend MSAnimationEnd",function(e){$(this).removeClass("is-active")})})}]),LiveOdiaApp.factory("HotnewsServiceFactory",["$http","$q","baseService",function($http,$q,baseService){var HotnewsServiceFactory={},_getHotFullNews=function(hnid){var deffer=$q.defer();return $http.get(baseService+"api/Home/"+hnid).success(function(data,status){deffer.resolve(data)}).error(function(err,status){deffer.reject(err)}),deffer.promise},_getHotFullNewsTitle=function(){var deffer=$q.defer();return $http.get(baseService+"api/HotNews").success(function(data,status){deffer.resolve(data)}).error(function(err,status){deffer.reject(err)}),deffer.promise},_getHotNewsSummary=function(hnid){var deffer=$q.defer();return $http.get(baseService+"api/HnewsSummary/"+hnid).success(function(data,status){deffer.resolve(data)}).error(function(err,status){deffer.reject(err)}),deffer.promise},_getHotNewsByID=function(hnid){var deffer=$q.defer();return $http.get(baseService+"api/HnewsSummary/"+hnid).success(function(data,status){deffer.resolve(data)}).error(function(err,status){deffer.reject(err)}),deffer.promise},_getHotNews=function(hnid){var deffer=$q.defer();return $http.get(baseService+"api/home/"+hnid).success(function(data,status){deffer.resolve(data)}).error(function(err,status){deffer.reject(err)}),deffer.promise},_getAllTopNews=function(){var deffer=$q.defer();return $http.get(baseService+"api/HnewsSummary/").success(function(data,status){deffer.resolve(data)}).error(function(err,status){deffer.reject(err)}),deffer.promise};return HotnewsServiceFactory.getHotNewsByID=_getHotNewsByID,HotnewsServiceFactory.getAllTopNews=_getAllTopNews,HotnewsServiceFactory.getHotFullNews=_getHotFullNews,HotnewsServiceFactory.getHotFullNewsTitle=_getHotFullNewsTitle,HotnewsServiceFactory.getHotNewsSummary=_getHotNewsSummary,HotnewsServiceFactory.getHotNews=_getHotNews,HotnewsServiceFactory}]),LiveOdiaApp.factory("adminServiceFactory",["$http","$q","baseService",function($http,$q,baseService){var adminServiceFactory={},getModelAsFormData=function(data){var dataAsFormData=new FormData;return data.ImpNews&&(dataAsFormData.append("file",data.file),dataAsFormData.append("inews",data.inewsTotal),dataAsFormData.append("title",data.title),dataAsFormData.append("ImpNews",data.ImpNews),data.isub&&dataAsFormData.append("isub",data.isub),dataAsFormData.append("priority",data.priority)),data.HotNews&&(dataAsFormData.append("file",data.file),dataAsFormData.append("hotNews",data.HotNews),dataAsFormData.append("title",data.title),data.hsub&&dataAsFormData.append("hsub",data.hsub),dataAsFormData.append("selOption",data.selOption),dataAsFormData.append("hfullNews",data.hnewsTotal)),data.Newstory&&(dataAsFormData.append("file",data.file),dataAsFormData.append("Newstory",data.Newstory),dataAsFormData.append("title",data.ntitle),data.nsub&&dataAsFormData.append("nsub",data.nsub),dataAsFormData.append("nstory",data.newstory)),data.TopNews&&(dataAsFormData.append("file",data.file),dataAsFormData.append("Topnews",data.TopNews),dataAsFormData.append("title",data.ttitle),data.tsub&&dataAsFormData.append("tsub",data.tsub),dataAsFormData.append("tnews",data.topnews)),dataAsFormData},_uploadFileToUrl=function(file){var deffer=$q.defer();return $http({url:baseService+"api/admin2/",method:"POST",data:getModelAsFormData(file),transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(result,status){deffer.resolve(result,status)}).error(function(result,status){deffer.reject(result)}),deffer.promise},_DownloadNews=function(newsdate){var deffer=$q.defer();return $http.post(baseService+"api/DownloadNews/",JSON.stringify({newsDate:newsdate}),{headers:{"Content-Type":"application/json;charset=utf-8"}}).success(function(data,status){deffer.resolve(data,status)}).error(function(result,status){deffer.reject(result)}),deffer.promise},_getHotFullNewsTitle=function(){var deffer=$q.defer();return $http.get(baseService+"api/HotNews").success(function(data,status){deffer.resolve(data)}).error(function(err,status){deffer.reject(err)}),deffer.promise},_DeleteAllNews=function(){var id=1,deffer=$q.defer();return $http.delete(baseService+"api/admin2/"+id).success(function(data,status){deffer.resolve(data)}).error(function(err,status){deffer.reject(err)}),deffer.promise},_AddCategory=function(cname){var deffer=$q.defer();return $http.post(baseService+"api/home/",JSON.stringify(cname),{headers:{"Content-Type":"application/json;charset=utf-8"}}).success(function(data,status){deffer.resolve(data,status)}).error(function(result,status){deffer.reject(result)}),deffer.promise},_updateNewsDate=function(newsdate){var deffer=$q.defer();return $http.post(baseService+"api/HnewsSummary/",JSON.stringify({newsDate:newsdate}),{headers:{"Content-Type":"application/json;charset=utf-8"}}).success(function(data,status){deffer.resolve(data,status)}).error(function(result,status){deffer.reject(result)}),deffer.promise};return adminServiceFactory.DownloadNews=_DownloadNews,adminServiceFactory.DeleteAllNews=_DeleteAllNews,adminServiceFactory.updateNewsDate=_updateNewsDate,adminServiceFactory.AddCategory=_AddCategory,adminServiceFactory.getHotFullNewsTitle=_getHotFullNewsTitle,adminServiceFactory.uploadFileToUrl=_uploadFileToUrl,adminServiceFactory}]),LiveOdiaApp.factory("detailTopnewsService",["$http","$q","baseService",function($http,$q,baseService){var detailTopnewsFactory={},_getTopDetailNews=function(id){var deffer=$q.defer();return $http.get(baseService+"api/topDetailNews/"+id).success(function(data,status){deffer.resolve(data)}).error(function(err,status){deffer.reject(err)}),deffer.promise};return detailTopnewsFactory.getTopDetailNews=_getTopDetailNews,detailTopnewsFactory}]),LiveOdiaApp.factory("detailnewsServiceFactory",["$http","$q","baseService",function($http,$q,baseService){var detailnewsServiceFactory={},_getDetailNews=function(id){var deffer=$q.defer();return $http.get(baseService+"api/NewStory/"+id).success(function(data,status){deffer.resolve(data)}).error(function(err,status){deffer.reject(err)}),deffer.promise},_getFullNews=function(nid){var deffer=$q.defer();return $http.get(baseService+"api/Fullnews/"+nid).success(function(data,status){deffer.resolve(data)}).error(function(err,status){deffer.reject(err)}),deffer.promise},_getHotFullNews=function(hnid){var deffer=$q.defer();return $http.get(baseService+"api/Test"+hnid).success(function(data,status){deffer.resolve(data)}).error(function(err,status){deffer.reject(err)}),deffer.promise};return detailnewsServiceFactory.getDetailNews=_getDetailNews,detailnewsServiceFactory.getFullNews=_getFullNews,detailnewsServiceFactory.getHotFullNews=_getHotFullNews,detailnewsServiceFactory}]),LiveOdiaApp.factory("homeServiceFactory",["$http","$q","baseService",function($http,$q,baseService){var homeServiceFactory={},_getAllNews=function(){var deffer=$q.defer();return $http.get(baseService+"api/home").success(function(data,status){deffer.resolve(data)}).error(function(err,status){deffer.reject(err)}),deffer.promise},_getImpNews=function(){var deffer=$q.defer();return $http.get(baseService+"api/ImpNews").success(function(data,status){deffer.resolve(data)}).error(function(err,status){deffer.reject(err)}),deffer.promise},_getImpNewsById=function(inid){var deffer=$q.defer();return $http.get(baseService+"api/ImpNews/"+inid).success(function(data,status){deffer.resolve(data)}).error(function(err,status){deffer.reject(err)}),deffer.promise},_getAllNewsStory=function(){var deffer=$q.defer();return $http.get(baseService+"api/NewStory").success(function(data,status){deffer.resolve(data)}).error(function(err,status){deffer.reject(err)}),deffer.promise},_DeleteNewsStory=function(id){var deffer=$q.defer();return $http.delete(baseService+"api/NewStory/"+id).success(function(data,status){deffer.resolve(data)}).error(function(err,status){deffer.reject(err)}),deffer.promise},_DeleteTopNews=function(id){var deffer=$q.defer();return $http.delete(baseService+"api/home/"+id).success(function(data,status){deffer.resolve(data)}).error(function(err,status){deffer.reject(err)}),deffer.promise},_DeleteHotNews=function(id){var deffer=$q.defer();return $http.delete(baseService+"api/HotNews/"+id).success(function(data,status){deffer.resolve(data)}).error(function(err,status){deffer.reject(err)}),deffer.promise},_getTopNewsByID=function(nid){var deffer=$q.defer();return $http.get(baseService+"api/home/"+nid).success(function(data,status){
deffer.resolve(data)}).error(function(err,status){deffer.reject(err)}),deffer.promise},_getAllHotNews=function(){var deffer=$q.defer();return $http.get(baseService+"api/admin2/").success(function(data,status){deffer.resolve(data)}).error(function(err,status){deffer.reject(err)}),deffer.promise},_getHotNewsSummary=function(ndid){var deffer=$q.defer();return $http.get(baseService+"api/HotNews/"+ndid).success(function(data,status){deffer.resolve(data)}).error(function(err,status){deffer.reject(err)}),deffer.promise};return homeServiceFactory.DeleteTopNews=_DeleteTopNews,homeServiceFactory.DeleteHotNews=_DeleteHotNews,homeServiceFactory.DeleteNewsStory=_DeleteNewsStory,homeServiceFactory.getImpNews=_getImpNews,homeServiceFactory.GetImpNewsById=_getImpNewsById,homeServiceFactory.getAllHotNews=_getAllHotNews,homeServiceFactory.getAllNewsStory=_getAllNewsStory,homeServiceFactory.getAllNews=_getAllNews,homeServiceFactory.getTopNewsByID=_getTopNewsByID,homeServiceFactory.getHotNewsSummary=_getHotNewsSummary,homeServiceFactory}]),LiveOdiaApp.service("fileUpload",["$http",function($http){this.uploadFileToUrl=function(file,uploadUrl){var fd=new FormData;fd.append("file",file),$http.post(uploadUrl,fd,{transformRequest:angular.identity,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).success(function(){}).error(function(){})}}]),LiveOdiaApp.factory("loginServiceFactory",["$http","$q","localStorageService","baseService",function($http,$q,localStorageService,baseService){var _authentication={isAuth:!1,userName:"",userRole:""},loginServiceFactory={},_login=function(ldata){var deffer=$q.defer();return $http.post(baseService+"api/login/",JSON.stringify(ldata),{headers:{"Content-Type":"application/json;charset=utf-8"}}).success(function(data,status){data!==!1&&(_authentication.isAuth=!0,_authentication.userName=ldata.userName,_authentication.userRole=ldata.userRole,localStorageService.set("authorizationData",{userName:ldata.userName,userRole:ldata.userRole})),deffer.resolve(data)}).error(function(err,status){_logOut(),deffer.reject(err)}),deffer.promise},_logOut=function(){localStorageService.remove("authorizationData"),_authentication.isAuth=!1,_authentication.userName="",_authentication.userRole=""},_fillAuthData=function(){var authData=localStorageService.get("authorizationData");authData&&(_authentication.userName=authData.userName,_authentication.userRole=authData.userRole,_authentication.isAuth=!0)};return loginServiceFactory.fillAuthData=_fillAuthData,loginServiceFactory.logOut=_logOut,loginServiceFactory.authentication=_authentication,loginServiceFactory.login=_login,loginServiceFactory}]),LiveOdiaApp.factory("sharedService",["$rootScope",function($rootScope){var shareServiceFactory={};shareServiceFactory.hnid="";var _getHDetailNews=function(hnid){this.hnid=hnid,this.broadcastHdetailNews()},_broadcastHdetailNews=function(){return shareServiceFactory.hnid};return shareServiceFactory.broadcastHdetailNews=_broadcastHdetailNews,shareServiceFactory.getHotDetailNews=_getHDetailNews,shareServiceFactory}]);